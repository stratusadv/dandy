<!doctype html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dandy Debug: 965I</title>
    <link rel="icon"
          href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICA8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI0MCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIzIiBmaWxsPSJyZWQiIC8+Cjwvc3ZnPg=="
          type="image/svg+xml">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style type="text/css">
        .text-run {
            color: #99AA99 !important;
        }

        .bg-run {
            background-color: #DDE0DD !important;
        }

        .text-retry {
            color: #999900 !important;
        }

        .bg-retry {
            background-color: #DDDDAA !important;
        }

        .text-request {
            color: #9900FF !important;
        }

        .bg-request {
            background-color: #DDCCFF !important;
        }

        .text-response {
            color: #0099FF !important;
        }

        .bg-response {
            background-color: #CCDDFF !important;
        }

        .text-result {
            color: #AA9999 !important;
        }

        .bg-result {
            background-color: #D0CCCC !important;
        }

        .text-success {
            color: #009900 !important;
        }

        .bg-success {
            background-color: #DDFFDD !important;
        }

        .text-warning {
            color: #FF9900 !important;
        }

        .bg-warning {
            background-color: #FFDDAA !important;
        }

        .text-failure {
            color: #BB0000 !important;
        }

        .bg-failure {
            background-color: #FFCCCC !important;
        }

        .text-other {
            color: #9999BB !important;
        }

        .bg-other {
            background-color: #EEEEF3 !important;
        }

        .text-attribute {
            color: #777777 !important;
        }

        .bg-attribute {
            background-color: #f9f9f9 !important;
        }

        .bg-top {
            background-color: #FFFFFF !important;
        }

        .white-space-pre-wrap {
            white-space: pre-wrap;
        }

        .cursor-pointer {
            cursor: pointer !important;
        }

        .fs-7 {
            font-size: 0.8rem !important;
        }

    </style>

</head>

<body class="bg-light">

<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

<script defer>
    document.addEventListener('alpine:init', () => {
        Alpine.data('dandy_recording', () => ({
            init() {
                for (let i = 0; i < this.recording.event_store.events.length; i++) {
                    this.recording.event_store.events[i].show_details = false
                }
            },

            open_all() {
                for (let i = 0; i < this.recording.event_store.events.length; i++) {
                    this.recording.event_store.events[i].show_details = true
                }
            },

            close_all() {
                for (let i = 0; i < this.recording.event_store.events.length; i++) {
                    this.recording.event_store.events[i].show_details = false
                }
            },

            recording: {
    "name": "test_recorder",
    "is_running": false,
    "start_datetime": "2025-09-21T22:28:11.719396",
    "stop_datetime": "2025-09-21T22:28:14.132867",
    "token_usage": 434,
    "run_time_seconds": 2.4129484998993576,
    "event_count": 10,
    "event_store": {
        "events": [
            {
                "id": "UK9A",
                "object_name": "Bot",
                "callable_name": "Process",
                "type": "run",
                "attributes": [
                    {
                        "key": "Module",
                        "value": "dandy.processor.bot.bot",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Args",
                        "value": "[]",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    },
                    {
                        "key": "Kwargs",
                        "value": "{\n    \"prompt\": \"Please tell me just the name only of the city that is the capital of Canada?\"\n}",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025762.4040702,
                "token_usage": 0,
                "run_time_seconds": 0.0
            },
            {
                "id": "OTUH",
                "object_name": "LLM Service",
                "callable_name": "Request",
                "type": "request",
                "attributes": [
                    {
                        "key": "Model",
                        "value": "qwen3-coder:30b",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Temperature",
                        "value": 0.3,
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Max Context Tokens",
                        "value": 32000,
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "JSON Schema",
                        "value": "{\n    \"properties\": {\n        \"content\": {\n            \"title\": \"Content\",\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"content\"\n    ],\n    \"title\": \"DefaultIntel\",\n    \"type\": \"object\"\n}",
                        "is_dropdown": true,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "system",
                        "value": "You are a helpful assistant.\n### Rules:\n- Do not use any markdown styling in your response.\n",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    },
                    {
                        "key": "user",
                        "value": "Please tell me just the name only of the city that is the capital of Canada?\n",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025762.4053561,
                "token_usage": 75,
                "run_time_seconds": 0.0012858998961746693
            },
            {
                "id": "OTUH",
                "object_name": "LLM Service",
                "callable_name": "Response",
                "type": "response",
                "attributes": [
                    {
                        "key": "LLM Response",
                        "value": "{\n  \"content\": \"Ottawa\"\n}",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025763.1379878,
                "token_usage": 6,
                "run_time_seconds": 0.7326316999970004
            },
            {
                "id": "OTUH",
                "object_name": "LLM Service",
                "callable_name": "Success",
                "type": "success",
                "attributes": [
                    {
                        "key": "Status",
                        "value": "Validated response from prompt into intel object.",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "DefaultIntel",
                        "value": "{\n    \"content\": \"Ottawa\"\n}",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025763.1386012,
                "token_usage": 0,
                "run_time_seconds": 0.0006134000141173601
            },
            {
                "id": "UK9A",
                "object_name": "Bot",
                "callable_name": "Process Returned Result",
                "type": "result",
                "attributes": [
                    {
                        "key": "Module",
                        "value": "dandy.processor.bot.bot",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Returned Result",
                        "value": "{\n    \"content\": \"Ottawa\"\n}",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025763.138756,
                "token_usage": 0,
                "run_time_seconds": 0.00015480001457035542
            },
            {
                "id": "D2P9",
                "object_name": "Bot",
                "callable_name": "Process",
                "type": "run",
                "attributes": [
                    {
                        "key": "Module",
                        "value": "dandy.processor.bot.bot",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Args",
                        "value": "[]",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    },
                    {
                        "key": "Kwargs",
                        "value": "{\n    \"prompt\": \"Please describe the following city: Ottawa\"\n}",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025763.1389338,
                "token_usage": 0,
                "run_time_seconds": 0.0001778000732883811
            },
            {
                "id": "RN2W",
                "object_name": "LLM Service",
                "callable_name": "Request",
                "type": "request",
                "attributes": [
                    {
                        "key": "Model",
                        "value": "qwen3-coder:30b",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Temperature",
                        "value": 0.3,
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Max Context Tokens",
                        "value": 32000,
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "JSON Schema",
                        "value": "{\n    \"properties\": {\n        \"content\": {\n            \"title\": \"Content\",\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"content\"\n    ],\n    \"title\": \"DefaultIntel\",\n    \"type\": \"object\"\n}",
                        "is_dropdown": true,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "system",
                        "value": "You are a helpful assistant.\n### Rules:\n- Do not use any markdown styling in your response.\n",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    },
                    {
                        "key": "user",
                        "value": "Please describe the following city: Ottawa\n",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025763.1420848,
                "token_usage": 66,
                "run_time_seconds": 0.0031510000117123127
            },
            {
                "id": "RN2W",
                "object_name": "LLM Service",
                "callable_name": "Response",
                "type": "response",
                "attributes": [
                    {
                        "key": "LLM Response",
                        "value": "{ \"content\": \"Ottawa is the capital city of Canada, located in the province of Ontario. It sits on the south bank of the Rideau River, near the border with Quebec. The city is known for its bilingual nature, being officially recognized as both English and French-speaking. Ottawa has a population of around one million people and serves as the political center of Canada, housing government buildings, Parliament Hill, and numerous national institutions. The city features a mix of historic architecture and modern development, with notable landmarks including the Parliament Buildings, the National Gallery of Canada, and the Canadian War Museum. Ottawa is also famous for its beautiful parks and green spaces, particularly during the spring when cherry blossoms bloom throughout the city. The annual Canada Day celebrations and winter festivals like the Winterlude are major attractions. The city has a relatively mild climate compared to other Canadian cities, with warm summers and cold winters. It's well-connected by public transit, including a metro system, and serves as an important hub for government workers and international visitors.\" }",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025764.8169077,
                "token_usage": 287,
                "run_time_seconds": 1.674822899978608
            },
            {
                "id": "RN2W",
                "object_name": "LLM Service",
                "callable_name": "Success",
                "type": "success",
                "attributes": [
                    {
                        "key": "Status",
                        "value": "Validated response from prompt into intel object.",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "DefaultIntel",
                        "value": "{\n    \"content\": \"Ottawa is the capital city of Canada, located in the province of Ontario. It sits on the south bank of the Rideau River, near the border with Quebec. The city is known for its bilingual nature, being officially recognized as both English and French-speaking. Ottawa has a population of around one million people and serves as the political center of Canada, housing government buildings, Parliament Hill, and numerous national institutions. The city features a mix of historic architecture and modern development, with notable landmarks including the Parliament Buildings, the National Gallery of Canada, and the Canadian War Museum. Ottawa is also famous for its beautiful parks and green spaces, particularly during the spring when cherry blossoms bloom throughout the city. The annual Canada Day celebrations and winter festivals like the Winterlude are major attractions. The city has a relatively mild climate compared to other Canadian cities, with warm summers and cold winters. It's well-connected by public transit, including a metro system, and serves as an important hub for government workers and international visitors.\"\n}",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025764.8169636,
                "token_usage": 0,
                "run_time_seconds": 0.00005589995998889208
            },
            {
                "id": "D2P9",
                "object_name": "Bot",
                "callable_name": "Process Returned Result",
                "type": "result",
                "attributes": [
                    {
                        "key": "Module",
                        "value": "dandy.processor.bot.bot",
                        "is_dropdown": false,
                        "is_card": false,
                        "is_base64_image": false
                    },
                    {
                        "key": "Returned Result",
                        "value": "{\n    \"content\": \"Ottawa is the capital city of Canada, located in the province of Ontario. It sits on the south bank of the Rideau River, near the border with Quebec. The city is known for its bilingual nature, being officially recognized as both English and French-speaking. Ottawa has a population of around one million people and serves as the political center of Canada, housing government buildings, Parliament Hill, and numerous national institutions. The city features a mix of historic architecture and modern development, with notable landmarks including the Parliament Buildings, the National Gallery of Canada, and the Canadian War Museum. Ottawa is also famous for its beautiful parks and green spaces, particularly during the spring when cherry blossoms bloom throughout the city. The annual Canada Day celebrations and winter festivals like the Winterlude are major attractions. The city has a relatively mild climate compared to other Canadian cities, with warm summers and cold winters. It's well-connected by public transit, including a metro system, and serves as an important hub for government workers and international visitors.\"\n}",
                        "is_dropdown": false,
                        "is_card": true,
                        "is_base64_image": false
                    }
                ],
                "start_time": 1025764.8170187,
                "token_usage": 0,
                "run_time_seconds": 0.00005509995389729738
            }
        ]
    }
}
        }))
    })
</script>

<script type="application/javascript">
    function detect_mime_type(base64_string) {
        const SIGNATURES = {
            JVBERi0: "application/pdf",
            R0lGODdh: "image/gif",
            R0lGODlh: "image/gif",
            iVBORw0KGgo: "image/png",
            "/9j/": "image/jpg"
        }

        for (let signature in SIGNATURES) {
            if (base64_string.indexOf(signature) === 0) {
                return SIGNATURES[signature];
            }
        }
    }
</script>

<div x-data="dandy_recording" class="container-fluid bg-light">

    <div class="row sticky-top bg-top py-1 mb-1 border-bottom border-dark shadow-sm">
        <div class="col-lg-auto align-middle ps-3 pe-0 py-2 d-none d-lg-block">
            <img style="height: 2.2rem;" src="https://dandysoftware.com/static/img/dandy_icon_128.png">
        </div>
        <div class="col-12 col-md-auto ps-3 pb-1">
            <div class="pe-4 float-start text-center">
                <span class="fs-7 text-muted">Dandy</span>
                <br>
                <span class="fw-bold">v1.0.0a1</span>
            </div>
            <div class="pe-4 float-start text-center">
                <span class="fs-7 text-muted">Recording</span>
                <br>
                <span class="fw-bold">965I</span>
            </div>
            <div class="pe-4 float-start text-center">
                <span class="fs-7 text-muted">Events</span>
                <br>
                <span class="fw-bold" x-html="recording.event_count"></span>
            </div>
            <div class="pe-4 float-start text-center">
                <span class="fs-7 text-muted">Date & Time</span>
                <br>
                <span class="fw-bold" x-html="">2025-09-21 22:28</span>
            </div>
        </div>

        <div class="col-12 col-md text-end pe-3 me-2">
            <a class="btn btn-outline-dark pt-1 mt-2 me-2 shadow-sm" @click="open_all()"><i
                    class="bi bi-arrows-expand"></i></a>

            <a class="btn btn-outline-dark pt-1 mt-2 me-2 shadow-sm" @click="close_all()"><i
                    class="bi bi-arrows-collapse"></i></a>

            <div style="width: 90px;" class="float-end text-end pe-1 fw-bold">
                <span class="fw-normal fs-7 text-muted">Run Time</span>
                <br>
                <span x-html="recording.run_time_seconds.toFixed(3) + 's'"></span>
            </div>

            <div style="width: 120px;" class="float-end text-end pe-1 fw-bold">
                <span class="fw-normal fs-7 text-muted">Token Usage</span>
                <br>
                <span x-html="recording.token_usage.toLocaleString()"></span>
            </div>
        </div>
    </div>

    <template x-for="event in recording.event_store.events">

        <div class="row mb-1">
    <div x-show="event.type === 'run'" class="col-12 text-center text-run pb-1">
        <i class="bi bi-caret-down-fill"></i>
        <i class="bi bi-caret-down-fill"></i>
        <i class="bi bi-caret-down-fill"></i>
    </div>

    <div class="col-auto fs-4 pe-0 me-0">
        <i x-show="event.type === 'run'" class="bi bi-cpu text-run"></i>
        <i x-show="event.type === 'request'" class="bi bi-box-arrow-up-right text-request ps-5"></i>
        <i x-show="event.type === 'response'" class="bi bi-box-arrow-in-down-left text-response ps-5"></i>
        <i x-show="event.type === 'result'" class="bi bi-arrow-return-left text-result"></i>
        <i x-show="event.type === 'retry'" class="bi bi-arrow-clockwise text-retry ps-5 ms-5"></i>
        <i x-show="event.type === 'success'" class="bi bi-check-lg text-success ps-5 ms-5"></i>
        <i x-show="event.type === 'warning'"
           class="bi bi-exclamation-triangle text-warning ps-5 ms-5"></i>
        <i x-show="event.type === 'failure'" class="bi bi-x-lg text-failure ps-5 ms-5"></i>
        <i x-show="event.type === 'other'" class="bi bi-question-diamond text-other"></i>
    </div>

    <div class="col">

        <div x-data="{
                    show_details: false
                }" x-model="event.show_details" x-modelable="show_details" class="card">

            <div x-on:click="show_details = !show_details" class="card-header cursor-pointer ps-2 py-1"
                 :class="{
                         'bg-run': event.type === 'run',
                         'bg-result': event.type === 'result',
                         'bg-request': event.type === 'request',
                         'bg-response': event.type === 'response',
                         'bg-retry': event.type === 'retry',
                         'bg-success': event.type === 'success',
                         'bg-warning': event.type === 'warning',
                         'bg-failure': event.type === 'failure',
                         'bg-other': event.type === 'other'
                         }"
            >
                <span x-show="!show_details"><i class="bi bi-plus-lg"></i></span>
                <span x-show="show_details"><i class="bi bi-dash-lg"></i></span>
                <span x-text="event.object_name"></span>
                <span><i class="bi bi-arrow-right"></i></span>
                <span x-text="event.callable_name"></span>
                <span class="float-end text-end" style="width:90px;">
                    <span x-show="event.run_time_seconds >= 0.001"
                          x-text="event.run_time_seconds.toLocaleString(undefined, {minimumFractionDigits: 3}) + 's'"></span>
                    <span x-show="event.run_time_seconds < 0.001">-</span>
                </span>
                <span class="float-end text-end" style="width: 100px;">
                    <span x-show="event.token_usage > 0" x-text="event.token_usage.toLocaleString()"></span>
                    <span x-show="event.token_usage <= 0">-</span>
                </span>
                <span x-text="event.id" class="float-end text-center" style="width: 70px;">
                </span>
            </div>

            <div x-show="show_details" class="card-body p-2"
                 style="font-size: 0.85rem; font-family: 'Courier New', serif">

                <table class="w-100">
                    <template x-for="attribute in event.attributes">
                        <tbody>

                        <template x-if="attribute.is_dropdown">
                            <tr>
                                <td colspan="2" x-data="{ show_attribute_value: false }">

                                    <div class="card bg-attribute shadow-sm mx-0 mt-2">
                                        <div class="card-body py-2 px-3">
                                            <div class="row">
                                                <div class="col-12 cursor-pointer ps-2"
                                                     x-on:click="show_attribute_value = !show_attribute_value">
                                                    <i class="bi bi-caret-right" x-show="!show_attribute_value"></i>
                                                    <i class="bi bi-caret-down" x-show="show_attribute_value"></i>
                                                    <span x-text="attribute.key" class="text-attribute"></span>
                                                </div>
                                            </div>
                                            <div x-show="show_attribute_value" class="row">
                                                <div class="col-12 white-space-pre-wrap" x-text="attribute.value">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </td>
                            </tr>
                        </template>

                        <template x-if="attribute.is_card">
                            <tr>
                                <td colspan="2">
                                    <div class="card bg-attribute shadow-sm mx-0 mt-2 w-100">
                                        <div class="card-body py-2 px-3">
                                            <div class="row">
                                                <div x-text="attribute.key + ':'" class="col-12 text-attribute">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div x-text="attribute.value" class="col-12 white-space-pre-wrap">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </template>

                        <template x-if="attribute.is_base64_image">
                            <img x-bind:src="'data:' + detect_mime_type(image) + ';base64,' + image"
                                 alt="image"
                                 class="img-fluid rounded border shadow-sm my-2">
                        </template>

                        <template x-if="!attribute.is_dropdown && !attribute.is_card && !attribute.is_base64_image">
                            <tr>
                                <td x-text="attribute.key + ':'" class="text-attribute align-top text-end pe-2"
                                    nowrap></td>
                                <td x-text="attribute.value" class="w-100 white-space-pre-wrap"></td>
                            </tr>
                        </template>

                        </tbody>

                    </template>

                </table>


            </div>

        </div>

    </div>

    <div x-show="event.type === 'result'" class="col-12 text-center text-result pb-1">
        <i class="bi bi-stop-fill"></i>
        <i class="bi bi-stop-fill"></i>
        <i class="bi bi-stop-fill"></i>
    </div>

</div>


    </template>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>
</html>